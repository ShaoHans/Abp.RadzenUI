@using Abp.RadzenUI.Application.Contracts.Organizations
@using Microsoft.AspNetCore.Authorization
@using Volo.Abp.Identity
@using Volo.Abp.Users
@inherits AbpRadzenUIComponentBase

@if (SelectedOu == null)
{
    <RadzenText Text="@IL["Ou:Role.Tooltip"]" TextAlign="TextAlign.Start" />
}
else
{
    <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.SpaceBetween" Gap="1rem">
        <RadzenText Text="@SelectedOu.DisplayName" TextAlign="TextAlign.Start" />
        <RadzenButton Text="@IL["Ou:Role.Add"]" Icon="add" Click="@OpenSeleteRoleDialogAsync" />
    </RadzenStack>

    <RadzenStack Gap="1rem" Style="margin-top:5px;">
        <RadzenDataGrid @ref="_grid" Data="@_entities" AllowPaging="true" AllowSorting="true" Density="Density.Default"
                        PagerHorizontalAlign="HorizontalAlign.Center"
                        PageSizeOptions="@_pageSizeOptions" ShowPagingSummary="@_showPagerSummary" LoadData="LoadDataAsync"
                        Count="@_totalCount" IsLoading="@_isLoading">
            <Columns>
                <RadzenDataGridColumn Title="@L["DisplayName:RoleName"]" Property="@nameof(IdentityRoleDto.Name)">
                    <Template>
                        <RadzenLabel Text="@context.Name" />
                        <RadzenBadge Text="@L["DisplayName:IsDefault"]" Visible="context.IsDefault" BadgeStyle="BadgeStyle.Success" />
                        <RadzenBadge Text="@L["DisplayName:IsPublic"]" Visible="context.IsPublic" BadgeStyle="BadgeStyle.Info" />
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn Title="@L["Actions"]" Width="60px" Frozen="true" Filterable="false" Sortable="false">
                    <Template>
                        <RadzenButton Icon="delete" title="@L["Delete"]" ButtonStyle="ButtonStyle.Danger" Size="ButtonSize.Small"
                                      Click=@(async () => await OpenDeleteConfirmDialogAsync(context.Id, context.Name)) />
                    </Template>
                </RadzenDataGridColumn>
            </Columns>
        </RadzenDataGrid>
    </RadzenStack>
}
